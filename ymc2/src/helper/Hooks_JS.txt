 –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∏–ª—å –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è JS-—Ö—É–∫–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö WordPress

| –§–æ—Ä–º–∞—Ç                   | –ü—Ä–∏–º–µ—Ä                        | –û–ø–∏—Å–∞–Ω–∏–µ                                                   |
| ------------------------ | ----------------------------- | ---------------------------------------------------------- |
| `plugin/component/event` | `ymc/post/before_loaded_data` | üîπ –°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ, –ø–æ–Ω—è—Ç–Ω–æ, –∏–∑–±–µ–≥–∞–µ—Ç –∫–æ–ª–ª–∏–∑–∏–π                  |
| `plugin_event_name`      | `ymc_before_loaded_data`      | ‚úîÔ∏è –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤                            |
| `plugin:component:event` | `ymc:post:before_loaded_data` | ‚ùå –†–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–≤–æ–µ—Ç–æ—á–∏–µ –≤ JS –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–º        |
| `plugin.component.event` | `ymc.post.before_loaded_data` | ‚ö†Ô∏è –ú–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º –∏ –ø—É—Ç–∞–Ω–∏—Ü–µ–π —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ |

–¢–∞–∫ —Å—Ç–æ–∏—Ç –¥–µ–ª–∞—Ç—å:

ymcHooks.doAction('ymc/post/before_loaded_data', container);
ymcHooks.addAction('ymc/post/after_loaded_data', (target) => {
  console.log('–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', target);
});

–û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Ö—É–∫–æ–≤
ymc/<–º–æ–¥—É–ª—å>/<—Å–æ–±—ã—Ç–∏–µ>

ymc ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å –ø–ª–∞–≥–∏–Ω–∞;
<–º–æ–¥—É–ª—å> ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: post, filter, ui, ajax);
<—Å–æ–±—ã—Ç–∏–µ> ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: before_render, after_fetch, init, ready, –∏ —Ç.–¥.).

–ü—Ä–∏–º–µ—Ä—ã –ø–æ –º–æ–¥—É–ª—è–º

1. –ú–æ–¥—É–ª—å: post
ymc/post/before_fetch         // –¥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ—Å—Ç–æ–≤
ymc/post/after_fetch          // –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤
ymc/post/render               // –ø—Ä–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ –ø–æ—Å—Ç–æ–≤

2. –ú–æ–¥—É–ª—å: filter
ymc/filter/change             // –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞
ymc/filter/apply              // –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
ymc/filter/reset              // –ø—Ä–∏ —Å–±—Ä–æ—Å–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤

3. –ú–æ–¥—É–ª—å: ajax
ymc/ajax/request_start        // –¥–æ AJAX-–∑–∞–ø—Ä–æ—Å–∞
ymc/ajax/request_end          // –ø–æ—Å–ª–µ AJAX-–∑–∞–ø—Ä–æ—Å–∞
ymc/ajax/fail                 // –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–ø—Ä–æ—Å–∞

4. –ú–æ–¥—É–ª—å: grid
ymc/grid/init                 // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∫–∏
ymc/grid/before_update        // –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
ymc/grid/after_update         // –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
ymcHooks.doAction('ymc/filter/apply', currentFilters);
ymcHooks.addAction('ymc/post/after_fetch', function(posts) {
    console.log('–ù–æ–≤—ã–µ –ø–æ—Å—Ç—ã:', posts);
});

### Hooks JS ###

1.
ymcHooks.doAction('ymc/grid/cancel_fetch', filter);

Location hook: ymc2\assets\js\frontend\functions\fetchPostsByFilters.js
–≠—Ç–æ—Ç —Ö—É–∫ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –ø–æ—Å—Ç–æ–≤ –≤ —Å–µ—Ç–∫—É (grid).
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–º–µ—à–∞—Ç—å—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å –∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
fetch-–∑–∞–ø—Ä–æ—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ DOM-—ç–ª–µ–º–µ–Ω—Ç–∞ —Å–µ—Ç–∫–∏.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
ymcHooks.doAction('ymc/grid/cancel_fetch', container);
–ì–¥–µ container ‚Äî DOM-—ç–ª–µ–º–µ–Ω—Ç —Å–µ—Ç–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, <div id="ymc-filter-1">), –∫–æ—Ç–æ—Ä—ã–π —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –∑–∞–ø—Ä–æ—Å–µ.

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞:
ymcHooks.addAction('ymc/grid/cancel_fetch', function(target) {
    if (target.classList.contains('ymc-filter-72')) {
        target.dataset.loadingEnabled = 'false';
    }
});

–ó–¥–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –µ—Å—Ç—å –∫–ª–∞—Å—Å ymc-filter-72. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ data-loading-enabled="false" ‚Äî —Å–ø–æ—Å–æ–± "–ø–æ–º–µ—Ç–∏—Ç—å"
DOM-—ç–ª–µ–º–µ–Ω—Ç –∫–∞–∫ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏.

----------------------------------

2.
ymcHooks.doAction('ymc/grid/before_update', container);
ymcHooks.doAction('ymc/grid/before_update_FilterID', container);
ymcHooks.doAction('ymc/grid/before_update_FilterID_Counter', container);

Location hook: ymc2\assets\js\frontend\utils\fetchFilteredPosts.js

–•—É–∫ ymc/grid/before_update –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–µ—Ç–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞ ‚Äî —Ç–æ –µ—Å—Ç—å –¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
(AJAX fetch) –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–º–µ—à–∞—Ç—å—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä: –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å DOM,
–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏, –∏–ª–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–∫–∏.

–í—ã–∑–æ–≤
ymcHooks.doAction('ymc/grid/before_update', container);
container ‚Äî DOM-—ç–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–µ—Ç–∫–∏ (#ymc-1, #ymc-2 –∏ —Ç.–¥.), –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ—Å—Ç—ã.

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞:
ymcHooks.addAction('ymc/grid/before_update_72', function(container) {
    console.log('–•—É–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç!', container);
    // –ü—Ä–∏–º–µ—Ä: –ø–æ–∫–∞–∑–∞—Ç—å loader
    target.classList.add('loading');
});

----------------------------------

3.
ymcHooks.doAction('ymc/grid/after_update', data, container);
ymcHooks.doAction('ymc/grid/after_update_FilterID', data, container);
ymcHooks.doAction('ymc/grid/after_update_FilterID_Counter', data, container);

Location hook: ymc2\assets\js\frontend\utils\fetchFilteredPosts.js

–≠—Ç–æ—Ç —Ö—É–∫ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å–µ—Ç–∫–∏ –ø–æ—Å—Ç–æ–≤ ‚Äî –∫–æ–≥–¥–∞ –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã —É–∂–µ –≤—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ DOM

| –ê—Ä–≥—É–º–µ–Ω—Ç    | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                                                      |
| ----------- | ------------- | ------------------------------------------------------------- |
| `container` | `HTMLElement` | DOM-—ç–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–µ—Ç–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.ymc-filter-123`)    |
| `res.data`  | `Object`      | –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–ø–æ—Å—Ç—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—è –∏ –¥—Ä.) |

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
ymcHooks.addAction('ymc/grid/after_update', function(data, container) {
    console.log('–ü–æ—Å—Ç—ã –≤—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ DOM:', container);
    console.log('–î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', data);
});

----------------------------------

4.
ymcHooks.doAction('ymc/grid/after_complete', response.status, container);
ymcHooks.doAction('ymc/grid/after_complete_FilterID', response.status, container);
ymcHooks.doAction('ymc/grid/after_complete_FilterID_Counter', response.status, container);

response.status ‚Äî —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ HTTP-–∑–∞–ø—Ä–æ—Å–∞. –ï—Å–ª–∏ –æ–Ω —Ä–∞–≤–µ–Ω 200, —Ç–æ –∑–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ.
container ‚Äî DOM-—ç–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–µ—Ç–∫–∏ (#ymc-1, #ymc-2 –∏ —Ç.–¥.), –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ—Å—Ç—ã.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
ymcHooks.addAction('ymc/grid/after_complete', function(status, container) {
    if (status === 200) {
        console.log('–ó–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ.');
    }
});

----------------------------------


















