var p=document.querySelector("body.js-ymc-admin"),a=document.querySelector("#ymc_main_meta_box .ymc-main"),g=a.dataset.postId,A=_ymc_fg_object.path,h=_ymc_fg_object.ajax_url,nt=a.querySelector("#ymc_main_meta_box .ymc-main #general"),b=a.querySelector("#ymc_main_meta_box .ymc-main #layouts"),j=a.querySelector("#ymc_main_meta_box .ymc-main #appearance"),J=a.querySelector("#ymc_main_meta_box .ymc-main #search"),E=a.querySelector("#ymc_main_meta_box .ymc-main #typography"),C=a.querySelector("#ymc_main_meta_box .ymc-main #advanced"),ct=a.querySelector("#ymc_main_meta_box .ymc-main #shortcode"),Q=a.querySelector("#ymc_main_meta_box .ymc-main #tools"),lt=a.querySelector("#ymc_main_meta_box .ymc-main #license");function N(e,t,r){let o="";if(r){let s=new Date;s.setTime(s.getTime()+r*24*60*60*1e3),o="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}function P(e){let t=e+"=",r=document.cookie.split(";");for(let o=0;o<r.length;o++){let s=r[o];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null}function I(){if(a.querySelectorAll(".tabs-content .js-headline-accordion").forEach(e=>{e.addEventListener("click",we)}),P("hashAccordionYmc")){let e=P("hashAccordionYmc");a.querySelectorAll(`.tabs-content .js-headline-accordion[data-hash="${e}"]`).forEach(t=>{t.classList.add("is-active"),t.nextElementSibling.style.display="block",t.querySelector(".js-icon-accordion").classList.add("fa-chevron-up"),t.querySelector(".js-icon-accordion").classList.remove("fa-chevron-down")})}}function we(e){let t=e.target.closest(".js-headline-accordion"),r=t.nextElementSibling,o=t.querySelector(".js-icon-accordion"),s=t.dataset.hash;t.classList.toggle("is-active"),jQuery(r).slideToggle(),o.classList.toggle("fa-chevron-down"),o.classList.toggle("fa-chevron-up"),N("hashAccordionYmc",s,30),(s==="custom_css"||s==="custom_js")&&setTimeout(function(){window.ymcEditors&&(window.ymcEditors.css&&window.ymcEditors.css.refresh(),window.ymcEditors.js&&window.ymcEditors.js.refresh())},300)}function z(){let e=a.querySelectorAll(".tabs-sidebar .nav .nav__item"),t=a.querySelectorAll(".tabs-content .section");if(e.forEach(r=>{r.addEventListener("click",o=>{let s=o.target.closest(".nav__item"),n=s.dataset.hash;N("hashymc",n,30),e.forEach(c=>{c.classList.remove("is-current")}),t.forEach(c=>{n===c.getAttribute("id")?c.classList.add("is-active"):c.classList.remove("is-active")}),s.classList.add("is-current")})}),P("hashymc")!==""){let r=P("hashymc");e.forEach(o=>{r===o.dataset.hash&&(e.forEach(s=>{s.classList.remove("is-current")}),o.classList.add("is-current"),t.forEach(s=>{r===s.getAttribute("id")?s.classList.add("is-active"):s.classList.remove("is-active")}))})}I()}function H(e){e(".js-btn-tooltip").tooltip({classes:{"ui-tooltip":"ymc-tooltip","ui-tooltip-content":"ymc-tooltip-content"},position:{my:"center bottom-20",at:"center",collision:"fit"},content:function(){return e(this).attr("data-tooltip-html")}})}function S(e){e===void 0?p.insertAdjacentHTML("afterbegin",`<div class="preloader"><img src="${A}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay"></div>`):p.querySelector(e).insertAdjacentHTML("afterbegin",`<div class="preloader preloader--is-local"><img src="${A}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay overlay--is-local"></div>`)}function T(){p.querySelector(".preloader").remove(),p.querySelector(".overlay").remove()}function x(e,t,r){typeof e=="string"?this.el=document.querySelector(e):this.el=e,this.tempName=t,this.data=r||null,this.folderPath=A+"src/admin/js-templates/"}x.prototype.create=function(e){let t=new XMLHttpRequest,r=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);r.el.innerHTML=o(r.data),e()}},t.send()};x.prototype.createAndWait=function(e){let t=new XMLHttpRequest,r=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);e(o,r.el)}},t.send()};function R(){jQuery(".js-term-insert .js-term-sortable").sortable({cursor:"move",opacity:1,delay:150,handle:".js-term-handle",scroll:!1,start:function(e,t){t.item[0].classList.add("is-item-dragging"),t.item[0].closest(".terms-inner").classList.add("dragging")},stop:function(e,t){t.item[0].classList.remove("is-item-dragging"),t.item[0].closest(".terms-inner").classList.remove("dragging");let r=[];a.querySelectorAll('.js-term-insert .js-term-sortable input[type="checkbox"]').forEach(o=>{r.push(o.value)}),Ce(r)}})}async function Ce(e){let t=h,r=new URLSearchParams({action:"action_terms_sort",nonce_code:_ymc_fg_object.sortTermAjax_nonce,payload:JSON.stringify({terms_sort:e,post_id:g})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function D(){jQuery(".selected-posts .js-post-sortable").sortable({axis:"y",cursor:"move",opacity:1,delay:150,containment:"parent",start:function(e,t){t.item[0].closest(".js-post-sortable").classList.add("dragging")},stop:function(e,t){t.item[0].closest(".js-post-sortable").classList.remove("dragging")}})}function k(){let e=this.dataset.postId,t=this.querySelector(".post-title").innerText,r={postId:e,postTitle:t};this.classList.add("is-disabled"),new x(".ymc-main #general .selected-posts .list-posts","tmpl-selected-posts").createAndWait(function(s,n){n.insertAdjacentHTML("beforeend",s(r)),a.querySelector("#general .selected-posts .number-posts").innerText=a.querySelectorAll("#general .selected-posts .list-posts .post-selected").length,D(),$()})}function L(){a.querySelectorAll("#general .feed-posts .js-scroll-posts .js-add-post").forEach(e=>{e.addEventListener("click",k)})}function $(){a.querySelectorAll("#general .selected-posts .post-selected .js-post-remove").forEach(e=>{e.addEventListener("click",function(){let t=this.dataset.postId;this.closest(".post-selected").remove(),a.querySelectorAll("#general .feed-posts .js-add-post").forEach(r=>{t===r.dataset.postId&&r.classList.remove("is-disabled")}),a.querySelector("#general .selected-posts .number-posts").innerText=a.querySelectorAll("#general .selected-posts .list-posts .post-selected").length})})}function v(e,t=document.body,r="seccess",o=3e3){let s=document.createElement("div");s.classList.add("notification",`notification--${r}`),s.innerHTML=e,document.querySelector(t).appendChild(s),setTimeout(()=>s.remove(),o)}function F(){a.querySelectorAll("#general .js-tax-insert .js-tax-settings").forEach(e=>{e.addEventListener("click",qe)})}function qe(){var i,l;a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(y=>y.classList.remove("is-open"));let e=this.closest(".taxonomies-list__item");e.classList.add("is-open");let{taxName:t,taxOriginalName:r,taxLabel:o,taxBg:s,taxColor:n,taxStatus:c}=e.dataset;o=o||r,s=s||"#ffffff",n=n||"#ffffff",tb_show("&#9998; Taxonomy: &#91; "+o+" &#93;","/?TB_inline&inlineId=thickbox-tax-modal&width=800&height=500");let d=p.querySelector("#TB_window #TB_ajaxContent .form-taxonomy");jQuery(d.querySelector(".js-tax-bg")).wpColorPicker("color",s),jQuery(d.querySelector(".js-tax-color")).wpColorPicker("color",n),d.querySelector(".js-tax-name").value=o,(i=p.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-save"))==null||i.addEventListener("click",Le),(l=p.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-reset"))==null||l.addEventListener("click",Ae)}function Le(){let e=a.querySelector("#general .js-tax-insert .is-open"),t=p.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),r=t.querySelector(".js-tax-bg").value,o=t.querySelector(".js-tax-color").value,s=t.querySelector(".js-tax-name").value,n=e.dataset.taxOriginalName,c=[];e.classList.add("changed"),e.dataset.taxBg=r,e.dataset.taxColor=o,e.dataset.taxLabel=s,e.dataset.taxStatus="changed",e.querySelector(".field-label").innerHTML=s||n,a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(d=>{c.push({name:d.dataset.taxName,label:d.dataset.taxLabel,background:d.dataset.taxBg,color:d.dataset.taxColor,status:d.dataset.taxStatus})}),Z(c)}function Ae(){let e=a.querySelector("#general .js-tax-insert .is-open"),t=p.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),r=[];jQuery(t.querySelector(".js-tax-bg")).wpColorPicker("color","#ffffff"),jQuery(t.querySelector(".js-tax-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-tax-name").value=e.dataset.taxOriginalName,e.classList.remove("changed"),e.dataset.taxBg="",e.dataset.taxColor="",e.dataset.taxLabel="",e.dataset.taxStatus="",e.querySelector(".field-label").innerHTML=e.dataset.taxOriginalName,a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(o=>{r.push({name:o.dataset.taxName,label:o.dataset.taxLabel,background:o.dataset.taxBg,color:o.dataset.taxColor,status:o.dataset.taxStatus})}),Z(r)}async function Z(e){let t="#TB_window #TB_ajaxContent",r=h,o=new URLSearchParams({action:"action_save_taxonomy_attrs",nonce_code:_ymc_fg_object.saveTaxAttrAjax_nonce,payload:JSON.stringify({post_id:g,tax_attrs:e})});try{S(t);let s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(s.ok){let n=await s.json();v(n.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+s.status)}catch(s){console.error("Error occurred:",s)}finally{T(t)}}function U(){a.querySelectorAll("#general .js-term-insert .js-term-settings").forEach(e=>{e.addEventListener("click",Ee)})}function Ee(){var B,O,V,G;a.querySelectorAll("#general .js-term-insert .term-item").forEach(Y=>Y.classList.remove("is-open"));let e=this.closest(".term-item");e.classList.add("is-open");let{termName:t,termNameOrig:r,termBackground:o,termColor:s,termClass:n,termDefault:c,termVisible:d,termIconAlignment:i,termIconClass:l,termIconColor:y,termIconUrl:m}=e.dataset;o=o||"#095c81",s=s||"#ffffff",n=n||"",c=c||"false",d=d||"true",t=t||r,i=i||"left",l=l||"",y=y||"#ffffff",m=m||"",tb_show("&#9998; Term: &#91; "+t+" &#93;","/?TB_inline&inlineId=thickbox-term-modal&width=800&height=500");let u=p.querySelector("#TB_window #TB_ajaxContent .form-term");jQuery(u.querySelector(".js-term-bg")).wpColorPicker("color",o),jQuery(u.querySelector(".js-term-color")).wpColorPicker("color",s),jQuery(u.querySelector(".js-icon-color")).wpColorPicker("color",y),u.querySelector(".js-term-class").value=n,u.querySelector(".js-term-name").value=t,u.querySelector(".js-term-default").checked=c==="true",u.querySelector(".js-term-visible").checked=d==="true",u.querySelector(".js-icon-class").value=l,u.querySelectorAll(".js-icon-alignment").forEach(Y=>{Y.checked=Y.value===i});let _=u.querySelector(".js-domain"),q=u.querySelector(".js-icon-preview");q.innerHTML=l?`<i class="${l}"></i>`:"",q.innerHTML=m?`<img src="${_.getAttribute("value")}${m}" width="20">`:"";let f=u.querySelector(".js-btn-icon-remove");f.classList.toggle("is-visible",!!l),f.classList.toggle("is-visible",!!m),(B=p.querySelector("#TB_window #TB_ajaxContent .js-btn-term-save"))==null||B.addEventListener("click",ke),(O=p.querySelector("#TB_window #TB_ajaxContent .js-btn-term-reset"))==null||O.addEventListener("click",Pe),(V=p.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon"))==null||V.addEventListener("change",Ne),(G=p.querySelector("#TB_window #TB_ajaxContent .js-upload-file"))==null||G.addEventListener("change",Ie),f==null||f.addEventListener("click",W);let w=p.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon");w.checked=!!m,w.dispatchEvent(new Event("change",{bubbles:!0})),Me(),Be(),Oe(),Ye()}async function ke(){let e=a.querySelector("#general .js-term-insert .is-open"),t=p.querySelector("#TB_window #TB_ajaxContent .form-term");e.classList.add("changed");let r=t.querySelector(".js-term-bg").value,o=t.querySelector(".js-term-color").value,s=t.querySelector(".js-term-class").value,n=t.querySelector(".js-term-name").value,c=t.querySelector(".js-term-default").checked,d=t.querySelector(".js-term-visible").checked,i=e.dataset.termNameOrig,l="left";t.querySelectorAll(".js-icon-alignment").forEach(f=>{f.checked&&(l=f.value)});let y=t.querySelector(".js-icon-class").value,m=t.querySelector(".js-icon-url").value,u=t.querySelector(".js-icon-color").value,_=e.querySelector(".checkbox-control").checked,q=[];e.querySelectorAll(".field-label").forEach(f=>{f.childNodes.forEach(w=>{w.nodeType===Node.TEXT_NODE&&w.textContent.trim()&&(w.remove(),f.insertAdjacentHTML("afterbegin",n||i))})}),e.dataset.termBackground=r,e.dataset.termColor=o,e.dataset.termClass=s,e.dataset.termName=n,e.dataset.termDefault=c,e.dataset.termVisible=d,e.dataset.termIconAlignment=l,e.dataset.termIconClass=y,e.dataset.termIconUrl=m,e.dataset.termIconColor=u,e.dataset.termChecked=_,e.dataset.termStatus="changed",a.querySelectorAll("#general .js-term-insert .term-item").forEach(f=>{q.push({term_id:f.dataset.termId,term_slug:f.dataset.termSlug,term_name_orig:f.dataset.termNameOrig,term_background:f.dataset.termBackground,term_color:f.dataset.termColor,term_class:f.dataset.termClass,term_default:f.dataset.termDefault,term_visible:f.dataset.termVisible,term_name:f.dataset.termName,term_checked:f.dataset.termChecked,term_status:f.dataset.termStatus,icon_class:f.dataset.termIconClass,icon_alignment:f.dataset.termIconAlignment,icon_color:f.dataset.termIconColor,icon_url:f.dataset.termIconUrl})}),await K(q)}async function Pe(){let e=a.querySelector("#general .js-term-insert .is-open"),t=p.querySelector("#TB_window #TB_ajaxContent .form-term"),r=[],{termNameOrig:o}=e.dataset;jQuery(t.querySelector(".js-term-bg")).wpColorPicker("color","#095c81"),jQuery(t.querySelector(".js-term-color")).wpColorPicker("color","#ffffff"),jQuery(t.querySelector(".js-icon-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-term-class").value="",t.querySelector(".js-term-name").value=o,t.querySelector(".js-term-default").checked=!1,t.querySelector(".js-term-visible").checked=!0,t.querySelector('.js-icon-alignment[value="left"]').checked=!0,t.querySelector(".js-icon-class").value="",t.querySelector(".js-icon-url").value="",t.querySelector(".js-icon-preview").innerHTML="",t.querySelector(".js-btn-icon-remove").classList.remove("is-visible"),t.querySelector(".upload-term-icon .label-file span").innerHTML="Choose a icon";let s=e.querySelector(".field-label");if(s){let n=Array.from(s.childNodes).find(c=>c.nodeType===Node.TEXT_NODE&&c.textContent.trim()!=="");n&&(n.textContent=`${o} `)}e.classList.remove("changed"),e.dataset.termBackground="",e.dataset.termColor="",e.dataset.termClass="",e.dataset.termName=o,e.dataset.termDefault="false",e.dataset.termVisible="true",e.dataset.termIconAlignment="",e.dataset.termIconClass="",e.dataset.termIconUrl="",e.dataset.termIconColor="",e.dataset.termChecked=e.querySelector(".checkbox-control").checked,e.dataset.termStatus="",a.querySelectorAll("#general .js-term-insert .term-item").forEach(n=>{r.push({term_id:n.dataset.termId,term_slug:n.dataset.termSlug,term_name_orig:n.dataset.termNameOrig,term_background:n.dataset.termBackground,term_color:n.dataset.termColor,term_class:n.dataset.termClass,term_default:n.dataset.termDefault,term_visible:n.dataset.termVisible,term_name:n.dataset.termName,term_checked:n.dataset.termChecked,term_status:n.dataset.termStatus,icon_class:n.dataset.termIconClass,icon_alignment:n.dataset.termIconAlignment,icon_color:n.dataset.termIconColor,icon_url:n.dataset.termIconUrl})}),await K(r)}async function K(e){let t="#TB_window #TB_ajaxContent",r=h,o=new URLSearchParams({action:"action_save_term_attrs",nonce_code:_ymc_fg_object.saveTermAttrAjax_nonce,payload:JSON.stringify({post_id:g,term_attrs:e})});try{S(t);let s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(s.ok){let n=await s.json();v(n.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+s.status)}catch(s){console.error("Error occurred:",s)}finally{T(t)}}function Me(){let e=p.querySelectorAll("#TB_window #TB_ajaxContent .tab-button"),t=p.querySelectorAll("#TB_window #TB_ajaxContent .tab-content");e.forEach(r=>{r.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("is-active")),t.forEach(o=>o.classList.remove("is-active")),r.classList.add("is-active"),p.querySelector("#TB_window #TB_ajaxContent #"+r.dataset.tab).classList.add("is-active")})})}function Be(){var o,s;let e=p.querySelector("#TB_window #TB_ajaxContent"),t=e.querySelectorAll(".tab-button"),r=e.querySelectorAll(".tab-content");t.forEach(n=>n.classList.remove("is-active")),r.forEach(n=>n.classList.remove("is-active")),(o=e.querySelector('.tabs [data-tab="tabTerm"]'))==null||o.classList.add("is-active"),(s=e.querySelector(".tabs #tabTerm"))==null||s.classList.add("is-active")}function Oe(){let e=p.querySelector("#TB_window #TB_ajaxContent .form-term .js-field-search-icon"),t=p.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i");e.addEventListener("input",()=>{let r=e.value.toLowerCase();t.forEach(o=>{let s=o.getAttribute("class").replace(/[\s.-]/g," ").toLowerCase();o.style.display=s.includes(r)?"inline-block":"none"})})}function Ye(){let e=p.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i"),t=p.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove");e.forEach(r=>{r.addEventListener("click",()=>{p.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.add("is-visible"),p.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value=r.getAttribute("class"),p.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML=r.outerHTML,p.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",p.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",t.addEventListener("click",W)})})}function W(){p.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.remove("is-visible"),p.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value="",p.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",p.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML="",p.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",p.querySelector("#TB_window #TB_ajaxContent .form-term .upload-term-icon .label-file span").innerHTML="Choose a icon"}function Ne(e){let t=p.querySelector("#TB_window #TB_ajaxContent"),r=t.querySelector(".js-upload-icon-wrap"),o=t.querySelector(".js-term-icon-selector"),s=this.checked;r.classList.toggle("is-hidden",!s),o.classList.toggle("is-hidden",s)}async function Ie(e){let t=h,r=e.target.files[0],o="#TB_window #TB_ajaxContent",s=p.querySelector("#TB_window #TB_ajaxContent .form-term"),n=s.querySelector(".js-icon-preview"),c=s.querySelector(".js-btn-icon-remove"),d=s.querySelector(".js-icon-class"),i=s.querySelector(".js-icon-url"),l=e.target.value.split("\\").pop(),y=s.querySelector(".js-domain");if(!r)return;let m=new FormData;m.append("icon",r),m.append("action","action_upload_term_icon"),m.append("post_id",g),m.append("nonce_code",_ymc_fg_object.uploadTermIconAjax_nonce);try{S(o);let u=await fetch(t,{method:"POST",credentials:"same-origin",body:m});if(u.ok){let _=await u.json();_.success&&_.data.url?(n.innerHTML=`<img src="${y.getAttribute("value")}${_.data.url}" width="20">`,d.value="",i.value=_.data.url,c.classList.add("is-visible"),c.addEventListener("click",W),this.nextElementSibling.querySelector("span").innerHTML=l,v(_.data.message,"#TB_window #TB_ajaxContent","success",2e3)):v(_.data.message,"#TB_window #TB_ajaxContent","error",2e3)}else console.error("Error HTTP: "+u.status)}catch(u){console.error("Error occurred:",u)}finally{T(o)}}function ee(){a.querySelector("#general .js-post-types").addEventListener("change",He)}function te(){a.querySelector("#general .js-tax-insert").addEventListener("click",Re)}function oe(){a.querySelector("#general .js-tax-clear").addEventListener("click",De)}function re(){a.querySelector("#general .js-tax-updated").addEventListener("click",Fe)}async function He(){if(confirm("Are you sure change Post Type? IMPORTANT! Post Type Changes remove all taxonomies, terms and selected posts.")){let t=a.querySelectorAll("#general #ymc-post-types option:checked"),r=Array.from(t).map(s=>s.value),o={action:"action_get_taxonomies",nonce_code:_ymc_fg_object.getTaxAjax_nonce,payload:JSON.stringify({post_types:r,post_id:g})};try{S(),_ymc_fg_object.loadedFeedPosts_page=2;let s=await fetch(h,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(s.ok){let n=await s.json(),c=n.taxonomies,d=n.posts,i={},l={},y=n.found_posts,m=a.querySelector("#general .posts-wrapper .js-scroll-posts"),u=a.querySelector("#general .posts-wrapper .feed-posts .number-posts");u.innerHTML=y,d.length>0?l={isPosts:!0,posts:d}:l={noPosts:!0,no_posts_found:"No posts found"},new x(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(f,w){a.querySelector(".feed-posts .js-scroll-posts").innerHTML="",a.querySelector(".selected-posts .js-post-sortable").innerHTML="",b.querySelector(".js-filter-group").innerHTML="";let B=b.querySelector(".js-toggle-filter-builder");B.value="default",B.dispatchEvent(new Event("change")),w.insertAdjacentHTML("beforeend",f(l)),m.querySelectorAll(".js-add-post").forEach(O=>{O.removeEventListener("click",k)}),L()}),Object.keys(c).length>0?i={taxonomies:c,isTax:!0}:i={isTax:!1},new x(".ymc-main .js-tax-insert","tmpl-taxonomy",i).create(function(){T(),c.length===0?a.querySelector(".js-control-bar").classList.add("is-hidden"):a.querySelector(".js-control-bar").classList.remove("is-hidden"),a.querySelector(".terms-wrapper .js-term-insert").innerHTML="",a.querySelector(".terms-wrapper").classList.add("is-hidden"),F()})}else console.error("Error HTTP: "+s.status)}catch(s){console.error("Error occurred:",s)}}else{let t=this.dataset.previousValue.split(",");a.querySelectorAll("#general #ymc-post-types option").forEach(r=>{r.selected=t.includes(r.value)})}}async function Re(e){if(e.target.nodeName==="INPUT"){let t=e.target.value,r=e.target.dataset.label;if(e.target.checked){let o={action:"action_get_terms",nonce_code:_ymc_fg_object.getTermAjax_nonce,payload:JSON.stringify({slug:t,label:r,post_id:g})};try{S();let s=await fetch(h,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(s.ok){let c=(await s.json()).data_obj,i={isTerms:c.terms.length>0?!0:[],tax_slug:c.tax_slug,tax_label:c.tax_label,terms:c.terms,no_terms:"No terms found"};new x(".ymc-main .js-term-insert","tmpl-term").createAndWait(function(y,m){T(),m.insertAdjacentHTML("beforeend",y(i)),a.querySelector(".terms-wrapper").classList.remove("is-hidden"),R(),U()})}}catch(s){console.error("Error occurred:",s)}}else confirm("Are you sure you want to disable this taxonomy?")?(a.querySelector(`.js-term-insert .js-tax-${t}`).remove(),a.querySelectorAll(".js-term-insert .cel").length===0&&a.querySelector(".terms-wrapper").classList.add("is-hidden")):e.target.checked=!0}}async function De(e){if(e.preventDefault(),confirm("Are you sure you want to remove all terms of taxonomies?")){let r={action:"action_remove_terms",nonce_code:_ymc_fg_object.removeTermsAjax_nonce,payload:JSON.stringify({post_id:g})};try{S();let o=await fetch(h,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r).toString()});if(o.ok){let s=await o.json();T(),a.querySelectorAll(".terms-wrapper .terms-grid .cel").forEach(n=>{n.remove()}),a.querySelector(".terms-wrapper").classList.add("is-hidden"),a.querySelectorAll("#general .js-tax-insert .js-tax-checkbox").forEach(n=>{n.checked=!1})}}catch(o){console.error("Error occurred:",o)}}}async function Fe(e){e.preventDefault();let t=a.querySelectorAll("#general #ymc-post-types option:checked"),r=Array.from(t).map(s=>s.value),o={action:"action_updated_taxonomies",nonce_code:_ymc_fg_object.updatedTaxAjax_nonce,payload:JSON.stringify({post_types:r})};try{S();let s=await fetch(h,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(s.ok){let c=(await s.json()).taxonomies,d=[],i={},l=Object.keys(c).length,y=new x(".ymc-main .js-tax-insert","tmpl-taxonomy");if(a.querySelectorAll(".js-tax-insert .taxonomies-list__item").forEach(m=>{let u=m.dataset.taxName;d.push(u)}),l>0){if(l>d.length)for(let m in c)d.includes(m)||(i={taxonomies:{[m]:c[m]},isTax:!0},y.createAndWait(function(u,_){_.insertAdjacentHTML("beforeend",u(i))}));l<d.length&&d.forEach(m=>{var u,_;Object.keys(c).includes(m)||((u=a.querySelector('.js-tax-insert [data-tax-name="'+m+'"]'))==null||u.remove(),(_=a.querySelector(".js-term-insert .js-tax-"+m))==null||_.remove())})}T()}}catch(s){console.error("Error occurred:",s)}}function se(){let e=a.querySelector(".js-tax-sortable");jQuery(e).sortable({cursor:"move",handle:".js-tax-handle",opacity:1,delay:150,scroll:!1,start:function(t,r){r.item[0].classList.add("is-item-dragging"),e.classList.add("dragging")},stop:function(t,r){r.item[0].classList.remove("is-item-dragging"),e.classList.remove("dragging");let o=[];e.querySelectorAll(".taxonomies-list__item").forEach(s=>{o.push(s.dataset.taxName)}),Ue(o)}})}async function Ue(e){let t=h,r=new URLSearchParams({action:"action_taxonomies_sort",nonce_code:_ymc_fg_object.sortTaxAjax_nonce,payload:JSON.stringify({tax_sort:e,post_id:g})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function ae(){a.querySelectorAll("#general .js-term-insert").forEach(e=>{e.addEventListener("click",function(t){if(t.target.closest(".tax-name")){let r=t.target.closest(".cel").querySelectorAll(".term-item .checkbox-control");t.target.checked?r.forEach(o=>{o.checked=!0}):r.forEach(o=>{o.checked=!1})}})})}function ne(){a.querySelector("#general .posts-wrapper .js-scroll-posts").addEventListener("scroll",X)}function ce(){a.querySelector("#general .posts-wrapper .js-field-search").addEventListener("input",Qe),a.querySelector("#general .posts-wrapper .js-btn-search").addEventListener("click",Je),a.querySelector("#general .posts-wrapper .js-btn-clear").addEventListener("click",le)}function X(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t={root:e,rootMargin:"0px",threshold:.9};new IntersectionObserver((o,s)=>{o.forEach(n=>{if(n.isIntersecting&&!n.target.classList.contains("is-loaded")){n.target.classList.add("is-loaded");let c=Array.from(a.querySelectorAll("#general #ymc-post-types option:checked")).map(i=>i.value),d={action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:c,paged:_ymc_fg_object.loadedFeedPosts_page,post_id:g,posts_per_page:20})};S("#general .posts-wrapper .js-scroll-posts"),fetch(h,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(d).toString()}).then(function(i){if(i.ok===!0)return i.json();console.error("Error occurred:",i.status)}).then(i=>{let l={};i.posts.length>0&&(l={isPosts:!0,posts:i.posts}),new x(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(m,u){T(),u.insertAdjacentHTML("beforeend",m(l)),_ymc_fg_object.loadedFeedPosts_page++,e.querySelectorAll(".js-add-post").forEach(_=>{_.removeEventListener("click",k)}),L()})}).catch(i=>console.error(i))}})},t).observe(e.querySelector("li:last-child"))}async function Je(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t=a.querySelector("#general .posts-wrapper .feed-posts .number-posts"),r=a.querySelector("#general .posts-wrapper .js-field-search").value.toLowerCase();if(r.length>0){let o=a.querySelectorAll("#general #ymc-post-types option:checked"),s=Array.from(o).map(c=>c.value),n={action:"action_search_feed_posts",nonce_code:_ymc_fg_object.searchFeedPostsAjax_nonce,payload:JSON.stringify({post_types:s,post_id:g,phrase:r})};try{S("#general .posts-wrapper .js-scroll-posts"),this.classList.add("button--disabled");let c=await fetch(h,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});if(c.ok){let d=await c.json(),i={},l=d.found_posts;d.posts.length>0?i={isPosts:!0,posts:d.posts}:i={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=l,this.classList.remove("button--disabled"),e.removeEventListener("scroll",X),e.scrollTo({top:0,left:0,behavior:"smooth"}),new x(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(m,u){T(),u.innerHTML=m(i),e.querySelectorAll(".js-add-post").forEach(_=>{_.removeEventListener("click",k)}),L()})}}catch(c){console.error("Error occurred:",c)}}}function Qe(){this.value.length>0?this.nextElementSibling.classList.remove("is-hidden"):(this.nextElementSibling.classList.add("is-hidden"),le().then(e=>{}))}async function le(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t=a.querySelector("#general .posts-wrapper .feed-posts .number-posts"),r=a.querySelector("#general .posts-wrapper .js-field-search"),o=a.querySelector("#general .posts-wrapper .js-btn-clear"),s=a.querySelectorAll("#general #ymc-post-types option:checked"),n=Array.from(s).map(l=>l.value),c=h,d="#general .posts-wrapper .js-scroll-posts",i=new URLSearchParams({action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:n,paged:1,post_id:g,posts_per_page:20})});o.classList.add("is-hidden"),r.value="",r.focus();try{S(d);let l=await fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()});if(l.ok){let y=await l.json(),m={},u=y.found_posts;y.posts.length>0?m={isPosts:!0,posts:y.posts}:m={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=u,e.scrollTo({top:0,left:0,behavior:"smooth"}),new x(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(q,f){f.innerHTML=q(m),_ymc_fg_object.loadedFeedPosts_page=2,e.querySelectorAll(".js-add-post").forEach(w=>{w.removeEventListener("click",k)}),L(),e.addEventListener("scroll",X)})}}catch(l){console.error("Error occurred:",l)}finally{T(d)}}function ie(){a.querySelector("#general .button-expand-wrapper .js-button-expand").addEventListener("click",function(){this.classList.toggle("is-expanded"),a.querySelectorAll("#general .select-posts-display__inner .cel .list-posts").forEach(e=>{e.classList.contains("is-expanded")?e.classList.remove("is-expanded"):e.classList.add("is-expanded")})})}function de(){a.querySelector("#general .excluded-posts-checkbox .js-excluded-checkbox").addEventListener("click",function(e){let t=a.querySelector("#general .selected-posts .js-post-sortable");this.checked?t.classList.add("is-excluded"):t.classList.remove("is-excluded")})}function ue(){me(),pe();let e=a.querySelectorAll("#layouts .filter-builder .js-filter-group .filter-item").length;a.querySelector("#layouts .filter-builder .js-add-filter").addEventListener("click",$e(e)),a.querySelector("#layouts .js-toggle-filter-builder").addEventListener("change",me)}function pe(){a.querySelectorAll("#layouts .filter-builder .js-remove-filter").forEach(e=>{e.addEventListener("click",We)})}function $e(e){return async function(){let t=a.querySelector(".filter-builder .js-filter-group"),r={action:"action_get_selected_taxonomies",nonce_code:_ymc_fg_object.getSelectTaxAjax_nonce,payload:JSON.stringify({post_id:g})};try{S();let o=await fetch(h,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r).toString()});if(o.ok){let s=await o.json(),n=s.taxSelected.length>0,c=s.taxSelected.length>0?"":"is-disabled",d={filterIndex:e,isTaxSelected:n,isDisabledTax:c,taxSelected:s.taxSelected,filtersTypes:s.filtersTypes,placements:s.placements};new x(t,"tmpl-filter-builder").createAndWait(function(l,y){y.insertAdjacentHTML("beforeend",l(d)),pe()}),e++}}catch(o){console.error("Error occurred:",o)}finally{T()}}}function We(){let e=this.closest(".filter-item");e&&e.remove()}function me(){let e=a.querySelector(".js-toggle-filter-builder"),t=a.querySelector(".filter-builder");e.value==="composite"?t.style.display="block":t.style.display="none"}function fe(e){j.querySelector(".js-term-sort-direction").addEventListener("change",Xe),j.querySelector(".js-pagination_type").addEventListener("change",Ve),j.querySelector(".js-post-order-by").addEventListener("change",Ge),j.querySelector(".js-add-order-multiple-field").addEventListener("click",ze(0,e)),j.querySelectorAll(".js-remove-order-field").forEach(t=>{t.addEventListener("click",ye)})}function Xe(){let e=this.value,t=j.querySelector(".js-term-sort-field"),r=e==="manual";t.style.display=r?"none":"block"}function Ve(){let e=this.value,t=j.querySelector(".js-navigation-buttons"),r=j.querySelector(".js-load-more-button"),o=e==="numeric",s=e==="loadmore";t.style.display=o?"block":"none",r.style.display=s?"block":"none"}function Ge(){let e=this.value,t=j.querySelector(".js-order-fields-meta-key"),r=j.querySelector(".js-order-fields-multiple-fields"),o=e==="meta_key";t.style.display=o?"block":"none";let s=e==="multiple_fields";r.style.display=s?"block":"none"}function ze(e,t){return function(){let r=j.querySelector(".post-order-fields-inner"),o=r.querySelectorAll(".field-group").length;o>0&&(e=o);let n=j.querySelector(".field-multiple-template").innerHTML.replace(/index/g,e);r.insertAdjacentHTML("beforeend",n),e++,H(t),j.querySelectorAll(".js-remove-order-field").forEach(c=>{c.addEventListener("click",ye)})}}function ye(){this.closest(".field-group").remove()}function _e(){let e=b.querySelector(".js-selected-post-layout"),t=b.querySelector(".js-grid-settings"),r=b.querySelector(".js-grid-style"),o=b.querySelector(".js-carousel-settings"),s=b.querySelector(".js-default-carousel-settings"),n=b.querySelector(".js-checkbox-custom-carousel-settings");e&&e.addEventListener("change",function(){this.value==="layout_carousel"?(t.style.display="none",r.style.display="none",o.style.display="block"):(t.style.display="block",r.style.display="block",o.style.display="none")}),s&&n.addEventListener("change",function(){this.checked?s.style.display="none":s.style.display="block"}),Ke(),Ze()}function Ze(){let e=b.querySelector(".js-tooltip-trigger"),t=b.querySelector(".js-field-example"),r;function o(){clearTimeout(r),t.classList.add("visible")}function s(){r=setTimeout(()=>{t.classList.remove("visible")},200)}e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",s),t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",s)}function Ke(){b.querySelectorAll(".field-description pre code").forEach(e=>{let t=e.innerHTML.split(`
`);for(;t.length&&t[0].trim()==="";)t.shift();for(;t.length&&t[t.length-1].trim()==="";)t.pop();let r=Math.min(...t.filter(o=>o.trim()).map(o=>o.match(/^(\s*)/)[0].length));e.innerHTML=t.map(o=>o.slice(r)).join(`
`)})}function he(){E.querySelector(".js-filter-font-family").addEventListener("change",et),E.querySelector(".js-post-title-font-family").addEventListener("change",tt),E.querySelector(".js-post-link-font-family").addEventListener("change",ot)}function et(){let e=this.value,t=E.querySelector(".js-filter-custom-font-fields"),r=e==="custom";t.style.display=r?"block":"none"}function tt(){let e=this.value,t=E.querySelector(".js-post-title-custom-font-fields"),r=e==="custom";t.style.display=r?"block":"none"}function ot(){let e=this.value,t=E.querySelector(".js-post-link-custom-font-fields"),r=e==="custom";t.style.display=r?"block":"none"}function ge(){J.querySelector(".js-autocomplete-enabled").addEventListener("change",rt)}function rt(){let e=J.querySelector(".js-autocomplete-settings");e&&(this.checked?e.classList.remove("is-hidden"):e.classList.add("is-hidden"))}function Se(){C.querySelector(".js-advanced-query-type").addEventListener("change",st)}function st(){let e=this.value,t=C.querySelector(".js-callback-function"),r=C.querySelector(".js-advanced-query"),o=e==="callback",s=e==="advanced";t&&(t.style.display=o?"block":"none"),r&&(r.style.display=s?"block":"none")}function Te(e){e(".js-picker-color").wpColorPicker(),e(".js-picker-color-alpha").wpColorPicker({palettes:!0,alpha:!0,clear:!0})}function xe(){M("#appearance .js-toggle-switch-filter-state","#appearance .js-is-disabled-filter-options","hide"),M("#appearance .js-toggle-switch-pagination","#appearance .js-is-disabled-pagination","hide"),M("#appearance .js-toggle-switch-popup","#appearance .js-is-enable-popup","show"),M("#search .js-toggle-switch-search-posts","#search .js-is-disabled-search-options","show"),M("#advanced .js-toggle-switch-advanced-query",".js-is-enable-advanced-query","show"),M("#advanced .js-toggle-switch-sort-posts",".js-is-enable-sort-posts","show")}function M(e,t,r="show"){document.querySelectorAll(`${e} .js-toggle-switch input[type="checkbox"]`).forEach(o=>{let n=o.closest(e).querySelector(t);if(!n)return;let c=()=>{let d=o.checked&&r==="show"||!o.checked&&r==="hide";n.style.display=d?"block":"none"};o.addEventListener("change",c),c()})}function je(){let e=C.querySelector(".js-preloader-icon"),t=C.querySelector(".js-preloader-filters"),r=C.querySelector(".js-preloader-custom-filters"),o=C.querySelector(".js-preview-preloader"),s=A+"assets/images/preloaders/",n=i=>{var m;let l=o.querySelector("img");if(!l)return;let y={none:"none",brightness:"brightness(1.4)",contrast:"contrast(1.5)",grayscale:"grayscale(100%)",invert:"invert(100%)",opacity:"opacity(40%)",saturate:"saturate(2)",sepia:"sepia(100%)"};if(i==="custom_filter"){let u=r==null?void 0:r.querySelector("input"),_=((m=u==null?void 0:u.value)==null?void 0:m.trim())||"none";_.startsWith("filter:")&&(_=_.replace(/^filter:\s*/i,"")),l.style.cssText=`filter: ${_};`}else l.style.filter=y[i]||"none"},c=i=>{if(!r)return;let l=r.querySelector("input");i==="custom_filter"?(r.style.display="block",l&&!l.dataset.listenerAttached&&(l.addEventListener("input",()=>{n("custom_filter")}),l.dataset.listenerAttached="true")):r.style.display="none"},d=i=>{if(i==="none")o.innerHTML="";else{let l=document.createElement("img");l.src=s+i+".svg",l.alt=i+" preloader",l.width=70,l.height=70,o.innerHTML="",o.appendChild(l);let y=(t==null?void 0:t.value)||"none";y==="custom_filter"?setTimeout(()=>{n("custom_filter")},0):n(y)}};e==null||e.addEventListener("change",function(){d(this.value)}),t==null||t.addEventListener("change",function(){let i=this.value;c(i),n(i)}),e!=null&&e.value&&e.value!=="none"&&d(e.value),t!=null&&t.value&&c(t.value)}function ve(){var e;(e=Q.querySelector(".export-wrapper .js-button-export-settings"))==null||e.addEventListener("click",async t=>{let r=new Date().getFullYear(),o=new Date().getDate(),s=new Date().getMonth(),n=new Date().getHours(),c=new Date().getMinutes(),d=new Date().getSeconds(),i=new FormData;i.append("action","action_export_settings"),i.append("nonce_code",_ymc_fg_object.exportSettingsAjax_nonce),i.append("post_id",g);try{S(".ymc-main #tools");let l=await fetch(h,{method:"POST",body:i});if(!l.ok){v(`HTTP error! Status: ${l.status}`,"#tools .export-wrapper .notify-wrapper","error",2e3);return}let y=await l.blob(),m=document.createElement("a"),u=`ymc-fg-export-${o}-${s+1}-${r}-${n}:${c}:${d}.json`,_=window.URL.createObjectURL(y);m.href=_,m.download=u,document.body.appendChild(m),m.click(),m.remove(),URL.revokeObjectURL(_),v("Settings exported","#tools .export-wrapper .notify-wrapper","success",2e3)}catch(l){console.error("Error occurred:",l),v("Error occurred","#tools .export-wrapper .notify-wrapper","error",2e3)}finally{T()}})}function be(e){var t;(t=Q.querySelector(".import-wrapper .js-file-import-settings"))==null||t.addEventListener("change",at)}function at(){let e=this,t=e.files[0];if(t)if(t.type==="application/json"&&t.name.indexOf("ymc-fg-export-")===0){let r=new FileReader;r.readAsText(t),r.onload=async function(){let o=new FormData;o.append("file",t),o.append("action","action_import_settings"),o.append("post_id",g),o.append("params",r.result),o.append("nonce_code",_ymc_fg_object.importSettingsAjax_nonce);try{S(".ymc-main #tools");let s=await fetch(h,{method:"POST",credentials:"same-origin",body:o});if(!s.ok){v(`HTTP error! Status: ${s.status}`,"#tools .import-wrapper .notify-wrapper","error",2e3);return}let n=await s.json();v(n.data.message,"#tools .import-wrapper .notify-wrapper","success",2e3),e.value="",location.reload()}catch(s){console.error("Error occurred:",s),v("Error occurred","#tools .import-wrapper .notify-wrapper","error",2e3)}finally{T()}}}else v("Invalid file format","#tools .import-wrapper .notify-wrapper","error",2e3)}(function(e){document.addEventListener("DOMContentLoaded",()=>{z(),I(),ee(),te(),oe(),re(),L(),$(),se(),R(),ie(),ae(),ne(),ce(),D(),de(),ue(),fe(e),_e(),he(),ge(),Se(),H(e),F(),U(),Te(e),xe(),je(),ve(),be()})})(jQuery);
