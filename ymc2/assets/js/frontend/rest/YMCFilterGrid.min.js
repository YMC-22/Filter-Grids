var Y=Object.defineProperty;var E=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var D=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&D(e,r,t[r]);if(E)for(var r of E(t))z.call(t,r)&&D(e,r,t[r]);return e};function _(e,t){if(!e||!e.dataset.params)return;let r;try{r=JSON.parse(e.dataset.params)}catch(o){console.error("Error parsing data-params:",o);return}Object.assign(r,t),e.dataset.params=JSON.stringify(r)}function L(e){if(!e||!e.dataset.params)return;let t;try{t=JSON.parse(e.dataset.params)}catch(r){console.error("Error parsing data-params:",r);return}return t}var N=_ymc_fg_object.path,x=_ymc_fg_object.ajax_url;var a={normalize(e){return e.replace(/\//g,".")},addAction(e,t,r=10){wp.hooks.addAction(this.normalize(e),"ymc-filter",t,r)},doAction(e,...t){wp.hooks.doAction(this.normalize(e),...t)},addFilter(e,t,r=10){wp.hooks.addFilter(this.normalize(e),"ymc-filter",t,r)},applyFilters(e,t,...r){return wp.hooks.applyFilters(this.normalize(e),t,...r)}};(!window.ymcHooks||typeof window.ymcHooks.addAction!="function"||typeof window.ymcHooks.doAction!="function")&&(window.ymcHooks=a);function $(e){e.querySelectorAll(".js-pagination-numeric li a").forEach(t=>{t.addEventListener("click",U(e))})}function U(e){return function(t){var o;t.preventDefault();let r=1;(o=this.getAttribute("href"))!=null&&o.startsWith("#page")?r=parseInt(this.getAttribute("href").replace("#page=","")):r=parseInt(this.innerText),_(e,{paged:r}),h(e)}}function B(e){e.querySelector(".js-btn-load-more").addEventListener("click",I(e))}function I(e){return function(){this.classList.add("button--loading");let t=L(e),r=++t.paged;_(e,{paged:r}),h(e,"append")}}function j(e,t="replace",r="js-ajax-content",o=null,s=null,i=null,l=null){var p;let A=t==="append"?"beforeend":"afterbegin",n=t==="append"?"preloader--is-load-more":"preloader--is-numeric",m={none:"none",brightness:"brightness(1.4)",contrast:"contrast(1.5)",grayscale:"grayscale(100%)",invert:"invert(100%)",opacity:"opacity(40%)",saturate:"saturate(2)",sepia:"sepia(100%)"},b=o||"dual_arc.svg",f=b.replace(/\.\w+$/,""),c=null;if(typeof ymcHooks!="undefined"){let u=[];l&&u.push(`ymc/grid/preloader_${l}`),u.push("ymc/grid/preloader");for(let d of u)if(c=ymcHooks.applyFilters(d,null),c)break}let g=c||`${N}/assets/images/preloaders/${b}`,w="";i==="custom_filter"?s&&(s.startsWith("filter:")&&(s=s.replace(/^filter:\s*/i,"")),w=` style="filter: ${s};"`):w=` style="filter: ${m[i]};"`;let v=`
        <div class="preloader ${n}">
            <img src="${g}" alt="preloader"${w}>
        </div>
        <div class="overlay"></div>`;(p=e.querySelector(`.${r}`))==null||p.insertAdjacentHTML(A,v)}function k(e){var t,r;(t=e.querySelector(".preloader"))==null||t.remove(),(r=e.querySelector(".overlay"))==null||r.remove()}function O(e){let t={root:null,rootMargin:"0px",threshold:.8};return new IntersectionObserver((r,o)=>{r.forEach(s=>{if(s.isIntersecting){let i=L(e),l=++i.paged;_(e,{paged:l}),h(e,"append"),o.unobserve(s.target)}})},t)}function T(e){return Array.isArray(e)?e.map(t=>T(t)):e!==null&&typeof e=="object"?Object.keys(e).reduce((t,r)=>{let o=K(r);return t[o]=T(e[r]),t},{}):G(e)}function K(e){return e.replace(/_([a-z])/g,(t,r)=>r.toUpperCase())}function G(e){if(typeof e=="string"){let t=e.toLowerCase();if(t==="true")return!0;if(t==="false")return!1;if(!isNaN(e)&&e.trim()!=="")return Number(e)}return e}function H(e,t,r){let o=T(r),{general:s,pagination:i,navigation:l,scrollbar:A,useCustomSettings:n}=o,{autoHeight:m,autoplay:b,autoplayDelay:f,loop:c,centeredSlides:g,slidesPerView:w,spaceBetween:v,mousewheel:p,speed:u,effect:d}=s,y=document.querySelector(`.js-swiper-${e}-${t}`);y&&(l.visible&&y.querySelectorAll(".post-layout_carousel").forEach(M=>{M.classList.add("has-navigation-arrows")}),y.closest(".js-ajax-content").classList.add("posts-carousel"),!n&&new Swiper(y,{grabCursor:!0,spaceBetween:v,centeredSlides:g,autoHeight:m,autoplay:b?{delay:f}:!1,loop:c,slidesPerView:w,mousewheel:p?{invert:!0}:!1,speed:u,effect:d,fadeEffect:d==="fade"?{crossFade:!0}:"",creativeEffect:d==="creative"?{prev:{shadow:!0,translate:[0,0,-400]},next:{translate:["100%",0,0]}}:"",pagination:i.visible?{el:".swiper-pagination",clickable:!0,dynamicBullets:i.dynamicBullets,type:i.type}:!1,navigation:l.visible?{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}:{enabled:!1},scrollbar:{el:".swiper-scrollbar",draggable:!0,enabled:A.visible}}))}async function h(e,t="replace"){var b;let r=JSON.parse(e.dataset.params),o=new FormData;o.append("action","get_filtered_posts"),o.append("nonce_code",_ymc_fg_object.getPosts_nonce),o.append("params",JSON.stringify(r)),o.append("filter_id",r.filter_id);let s=e.querySelector(".js-ajax-content");a.doAction("ymc/grid/before_update",e),a.doAction("ymc/grid/before_update_"+r.filter_id,e),a.doAction("ymc/grid/before_update_"+r.filter_id+"_"+r.counter,e);let i=r.preloader_settings.icon+".svg",l=r.preloader_settings.filter_preloader,A=r.preloader_settings.custom_filters_css,n=r.filter_id;i=a.applyFilters("ymc/grid/preloader",i),i=a.applyFilters("ymc/grid/preloader_"+r.filter_id,i),t==="append"?j(e,"append","js-ajax-content",i,A,l,n):j(e,"replace","js-ajax-content",i,A,l,n);let m;try{if(m=await fetch(x,{method:"POST",body:o}),!m.ok){console.error(`HTTP error: ${m.status}`);return}let f=await m.json();if(!f.success){console.warn("No renderedHTML in response");return}(b=e.querySelector(".pagination"))==null||b.remove();let{rendered_posts:c,rendered_pagination:g,pagination_type:w,found_posts:v,paged:p,max_num_pages:u,posts_count:d,requires_swiper:y,scroll_filter_bar:M,results_text:C}=f.data;if(v>0){switch(s.classList.remove("posts-no-found"),w){case"numeric":if(s.innerHTML=c,g&&(s.insertAdjacentHTML("afterend",g),$(e)),M==="yes"){e.querySelector(".filter-layout").scrollIntoView({behavior:"smooth",block:"start",inline:"start"});let S=e.getBoundingClientRect().top+window.scrollY-30;window.scrollTo({top:S,behavior:"smooth"})}break;case"loadmore":t==="append"?s.insertAdjacentHTML("beforeend",c):s.innerHTML=c,g&&u>p&&(s.insertAdjacentHTML("afterend",g),B(e));break;case"infinite":t==="append"?s.insertAdjacentHTML("beforeend",c):s.innerHTML=c,u>p&&O(e).observe(s.querySelector(".post-card:last-child"));break;default:s.innerHTML=c;break}if(y)if(typeof Swiper=="undefined"){let P=document.createElement("link");P.rel="stylesheet",P.href=_ymc_fg_object.path+"assets/css/lib/swiper.min.css",document.head.appendChild(P);let S=document.createElement("script");S.src=_ymc_fg_object.path+"assets/js/lib/swiper.min.js",S.onload=()=>{H(r.filter_id,r.counter,r.carousel_settings)},document.body.appendChild(S)}else H(r.filter_id,r.counter,r.carousel_settings)}else s.classList.add("posts-no-found"),s.innerHTML=c;let q=e.querySelector(".js-results-found");q&&(q.textContent=C?`${v} ${C}`:""),a.doAction("ymc/grid/after_update",f.data,e),a.doAction("ymc/grid/after_update_"+r.filter_id,f.data,e),a.doAction("ymc/grid/after_update_"+r.filter_id+"_"+r.counter,f.data,e)}catch(f){console.error("Error occurred:",f)}finally{k(e),a.doAction("ymc/grid/after_complete",m.status,e),a.doAction("ymc/grid/after_complete_"+r.filter_id,m.status,e),a.doAction("ymc/grid/after_complete_"+r.filter_id+"_"+r.counter,m.status,e)}}async function J(e){e.preventDefault();let t=document.querySelector("body"),r=this.closest(".js-ymc-container"),o=JSON.parse(r.dataset.params),s=this.closest(".post-card"),i=this.getAttribute("data-grid-id"),l=this.getAttribute("data-post-id"),A=this.getAttribute("data-counter"),n=document.querySelector(`#ymc-popup-${i}`),m=n.querySelector(".js-ymc-popup-wrapper"),b=n.querySelector(".js-ymc-btn-popup-close"),f=n.querySelector(".js-ymc-popup-body"),c=o.preloader_settings.icon+".svg",g=o.preloader_settings.filter_preloader,w=o.preloader_settings.custom_filters_css,v=o.filter_id;if(!n)return;t.style.overflow="hidden",b.addEventListener("click",function(d){n.classList.remove("is-open"),t.style.overflow="auto"}),n.addEventListener("click",function(d){d.target===n&&(n.classList.remove("is-open"),t.style.overflow="auto")});let p=new FormData;p.append("action","get_post_to_popup"),p.append("nonce_code",_ymc_fg_object.getPostToPopup_nonce),p.append("post_id",l),p.append("grid_id",i),p.append("counter",A),f.innerHTML="",c=a.applyFilters("ymc/grid/preloader",c),c=a.applyFilters("ymc/grid/preloader_"+o.filter_id,c),j(s,"replace","js-grid-item",c,w,g,v),a.doAction("ymc/popup/before_open",n),a.doAction("ymc/popup/before_open_"+o.filter_id,n);let u;try{if(u=await fetch(x,{method:"POST",body:p}),!u.ok){console.error(`HTTP error: ${u.status}`);return}let d=await u.json();if(!d.success){console.warn("No renderedHTML in response");return}let{body:y}=d.data;f.innerHTML=y,n.classList.add("is-open"),a.doAction("ymc/popup/after_open",n,y),a.doAction("ymc/popup/after_open_"+o.filter_id,n,y)}catch(d){console.error("Error occurred:",d)}finally{k(s)}}(function(){if(typeof window.YMCFilterGrid!="undefined"){console.error("YMCFilterGrid is existed.");return}window.YMCFilterGrid={config:{container:"#ymc-filter-1",filters:{}},init(e){if(typeof e!="string"){console.error("YMCFilterGrid.init: container must be a selector string.");return}let t=document.querySelector(e);if(!t)throw new Error(`YMCFilterGrid.init: container "${e}" not found`);this.config.container=t},setFilter(e,t={}){let{sendRequest:r=!0}=t,o=this.config.container;_(o,F({paged:e},this.config.filters)),r&&h(o).then(s=>{})},filterByTerm(e,t,r=!0){if(typeof e!="string"||typeof t!="string"){console.error("filterByTerm: Both arguments must be strings.");return}let o=e.split(",").map(i=>i.trim()).filter(i=>i.length>0),s=t.split(",").map(i=>i.trim()).filter(i=>i.length>0);if(o.length===0||s.length===0){console.error("filterByTerm: taxonomy and termId must not be empty.");return}this.config.filters.taxonomies=o,this.config.filters.terms=s,this.setFilter(1,{sendRequest:r})},filterByPostStatus(e,t=!0){if(typeof e!="string"){console.error("filterByPostStatus: status must be a string.");return}this.config.filters.post_status=e,this.setFilter(1,{sendRequest:t})},sortPosts(e,t="asc",r={}){let{metaKey:o="",metaValue:s="meta_value",multipleFields:i=null,sendRequest:l=!0}=r;this.config.filters.post_order_by=e,this.config.filters.post_order=t,e==="meta_key"?(this.config.filters.order_meta_key=o,this.config.filters.order_meta_value=s):e==="multiple_fields"&&Array.isArray(i)&&(this.config.filters.post_order_by_multiple={fields:i}),this.setFilter(1,{sendRequest:l})},filterByMeta(e,t="AND",r=!0){if(!Array.isArray(e)){console.error("filterByMeta: metaQuery must be an array.");return}let o=t==="AND"||t==="OR"?t:"AND";this.config.filters.meta_query=e,this.config.filters.meta_query_relation=o,this.setFilter(1,{sendRequest:r})},filterByDate(e={},t=!0){if(typeof e!="object"||Array.isArray(e)){console.error("filterByDate: Argument must be an object.");return}this.config.filters.date_query=e,this.setFilter(1,{sendRequest:t})},search(e,t=[],r=!0){if(typeof e!="string"){console.error("search: keyword must be a string.");return}if(this.config.filters.search=e.trim(),Array.isArray(t))t=t.map(o=>o.toString().trim()).filter(o=>o.length>0);else if(typeof t=="string")t=t.split(",").map(o=>o.trim()).filter(o=>o.length>0);else{console.error("search: termIds must be an array or a comma-separated string.");return}t.length>0?this.config.filters.terms=t:delete this.config.filters.terms,this.setFilter(1,{sendRequest:r})},choicePosts(e=[],t="no",r=!0){if(Array.isArray(e))e=e.map(o=>o.toString().trim()).filter(o=>o.length>0);else if(typeof e=="string")e=e.split(",").map(o=>o.trim()).filter(o=>o.length>0);else{console.error("choicePosts: selectedPosts must be an array or a comma-separated string.");return}if(e.length===0){console.error("choicePosts: selectedPosts cannot be empty.");return}this.config.filters.selected_posts=e,this.config.filters.excluded_posts=t==="yes"?"yes":"no",this.setFilter(1,{sendRequest:r})},getPosts(){let e=this.config.container;if(!e){console.error("getPosts: container is not initialized.");return}_(e,F({paged:1},this.config.filters)),h(e).then(t=>{})},pageUpdated(e){if(typeof e!="number"||isNaN(e)||e<1){console.error("PageUpdated: page must be a positive number.");return}let t=this.config.container;if(!t){console.error("PageUpdated: container is not initialized.");return}_(t,F({paged:e},this.config.filters)),h(t).then(r=>{})},openFilterPopup(e){if(typeof e!="string"&&typeof e!="number"){console.error("openFilterPopup: postId must be a string or number.");return}let t=document.querySelector(`.js-ymc-popup-trigger[data-post-id="${e}"]`);if(!t){console.error(`openFilterPopup: trigger element for post_id=${e} not found.`);return}let r={preventDefault:()=>{}};J.call(t,r)}}})();
